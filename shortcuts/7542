{"id":"7542","name":"Silent Updater - Tutorial Version","tagline":"A shortcut that provides a tutorial on how to create your own unobtrusive shortcut updater","icon":"ios14 c1440408063 g59772","latest":"24087","description":"\n\t\t\t\t\t<p>This shortcut provides a tutorial on how to create your own unobtrusive shortcut updater. The shortcut will silently check for updates. If one is available it will automatically add the update option to a list menu of your choice with a non-obtrusive option to update to the newest version of the shortcut.</p>\n<h4><strong>Sample menu with update available</strong></h4>\n<p><img alt=\"\" src=\"https://i.imgur.com/VIjYA80.jpg\"></p>\n<h4><strong>Sample menu with no update available</strong></h4>\n<p><img alt=\"\" src=\"https://i.imgur.com/A8ywTKv.jpg\"></p>\n<h3>Guide</h3>\n<p>This tutorial will give you a step-by-step guide of how to create a basic Routine Hub updater.</p>\n<p>First we will need a dictionary like this one:\n<img alt=\"\" src=\"https://i.imgur.com/RdoMiDF.png\">\nThis dictionary gives information about the shortcut you are using.\n- Name is the name of the shortcut\n- Author is your name\n- Version is the shortcut version\n- RHID is the shortcut’s ID on RoutineHub. The RHID can be found in the shortcut’s url. For example, the Silent Updater Tutorial url is https://routinehub.co/shortcut/7542/. So it’s RHID is 7542.</p>\n<p>RoutineHub has an API to get information about the latest version of a shortcut. The address is in the form:https://routinehub.co/api/v1/shortcuts/[RHID]/versions/latest. The [RHID] value in the API would be the actual RoutineHub ID. However, in our shortcut, we will pull that value from the dictionary above. You could also replace it with the actual number.\n<img alt=\"\" src=\"https://i.imgur.com/rIdGABn.png\"></p>\n<p>The action above went online to get the API information from RoutineHub. The information is saved as a json dictionary in the format: </p>\n<pre><code>     {\"result\":\"success\",\"id\":23176,\"Version\":\"0.51\",\"URL\":\"https:\\/\\/www.icloud.com\\/shortcuts\\/5dfb7717db504a5a92cab44270761427\",\"Release\":\"November 24, 2020\",\"Notes\":\"Added silent updater (only appears when there is an update available and doesn’t nag you or interfere with the shortcut’s operation)\"}\n</code></pre>\n<p>The next action saves that information as a variable called update details. </p>\n<p><img alt=\"\" src=\"https://i.imgur.com/rO4RTiH.png\"></p>\n<p>Then we add a number action which retrieves  the Update Details action as a dictionary and uses the value of the Version key. In order to add this action yourself, add Update Details as the number value, click on the name to bring up the action’s information, click where it says “as file” and change the type to “Dictionary”. In the “Get Value For Key” area, set the value for Key to “Version” (case sensitive).\n<img alt=\"\" src=\"https://i.imgur.com/WJKqAFl.png\"></p>\n<p>The next step is to add an if action which will compare the version number from above with the current version number from the initial dictionary. If the online version number is larger than the current shortcut’s version number, it triggers the if action’s option, otherwise it skips it.\n<img alt=\"\" src=\"https://i.imgur.com/7sYHE8O.png\"></p>\n<p>If the if action is triggered, it creates a variable with the value “Update [shortcut name] to Version [current online version number]”. Then, the value is saved as a variable called update. </p>\n<p>Next we get to our list where the update appears (shown in action at the top of this description). </p>\n<p>The list below has 4 options. The first one is the update variable created in the if action above. If the variable has no value (because there is no update available), it will not appear in the choose from list action and there will only be three choices. </p>\n<p>The list is followed by a choose from list  action which is used to choose from the above list.</p>\n<p><img alt=\"\" src=\"https://i.imgur.com/jah9UIT.png\"></p>\n<p>Next we use an if action to see if an update is available and the user selected the update option from the list above. </p>\n<p><img alt=\"\" src=\"https://i.imgur.com/mMOZi9P.png\"></p>\n<p>If the update routine is triggered, we add actions to do four steps:</p>\n<ul>\n<li>Ping RoutineHub to credit the shortcut with one download of the updated version of the shortcut (optional);</li>\n<li>Retrieve the iCloud url of the updated version of the shortcut from the API call used earlier; </li>\n<li>Convert the iCloud url into a format which can be opened directly in shortcuts (by replacing “http://www.iCloud.com/” in the url with “Shortcuts:/“; and </li>\n<li>Exiting the original shortcut so as to avoid conflicts when updating to the new version.</li>\n</ul>\n<p><img alt=\"\" src=\"https://i.imgur.com/dnfwu6s.png\"></p>\n<p>You then end the if action and have completed embedding a silent Updater. </p>\n<p>Now you can continue with the rest of your shortcut.</p>\n\t\t\t\t","releasenotes":"<p><strong>0.4 - Dec. 27, 2020, 7:58 a.m.</strong></p><p>Bug fix</p>"}