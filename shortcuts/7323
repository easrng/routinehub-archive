{"id":"7323","name":"MathLibrarycuts","tagline":"数式などを定義したライブラリファイルを読み込み、関数として使うレシピ","icon":"ios14 c4282601983 g59671","latest":"22611","description":"\n\t\t\t\t\t<h1>説明</h1>\n\n<p>このショートカットでは, 予め「ファイル」アプリに保存したplist形式のテキストファイルを辞書として読み込み, 中にあるルール付けられた関数を適用して必要に応じて4種類の値を表示します.\n<br><br><br>\n</p><h2>ライブラリとなるplistファイルの構文</h2>\n例えばx+1という関数を定義する場合は<br><p></p>\n<p>&lt;key&gt;favorite function name&lt;/key&gt;<br>\n  &lt;array&gt;<br>\n  &lt;string&gt;x+1&lt;/string&gt;<br>\n  &lt;string&gt;変数&lt;/string&gt;<br>\n  &lt;/array&gt;<br>\nと, keyに好きな関数名を書き, 配列arrayの先頭に数式, その後ろに対応する変数をすべて書き並べます.<br><br></p>\n<p>配列array内のstring要素が一つの場合は定数として扱います.\n<br><br>\n&lt;key&gt;favorite function name&lt;/key&gt;<br>\n  &lt;array&gt;<br>\n&lt;string&gt;123&lt;/string&gt;<br>\n  &lt;/array&gt;\n<br><br>\n定数で例えば&lt;string&gt;123.4^-5&lt;/string&gt;と入力すると123.4×10^(-5)として扱われます.\n<br><br>\nこうして作成したplist形式のテキストファイルを「ファイル」アプリの\"Shortcuts\"フォルダの中に保存します.<br><br>\n<img src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/t/thetheorier/20201107/20201107145905.png\">\n保存先のファイルパスをレシピの一番上にある「テキスト」アクションで指定することで初めて機能します.\n<br><br>\n</p><h2>サブルーチンとして使う</h2>\n<img src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/t/thetheorier/20201107/20201107154818.png\">\n配布時点では, レシピ末尾に「結果を表示」で演算結果などが表示されるようになっています.<br>\nサブルーチン(関数)として使う場合はこのアクションを削除してその上の「リスト」が出力となるようにしてください.<br>\n<ul>\n<li>numerical formula<br>…MathLibrarycutsの入力として渡された値そのものです, 数式の場合は各変数にどんな値を代入したかが配列として格納されます</li>\n<li>formula<br>…文字式, 定数の場合は空のデータです</li>\n<li>value<br>…MathLibrarycuts内での「計算式」アクションによる演算結果. 通常の意味での「返り値」がこれに相当します(小数以下の桁数は「計算式」アクションに従います).\n</li><li>V<br>…基本はvalueと同じ値ですが, 例外として定数のうち指数が極端に小さい場合はこの値が「仮数部」と「指数部」の配列として出力されます.<br>　演算結果が著しく小さくなり, 「計算式」アクションの桁数によって0になることを想定したもので, 普通は使いません.</li>\n</ul><br><p></p>\n<h2>関数として呼び出す</h2>\n\n<p>C言語で関数を呼び出す際にfunction(1,2)などと書いてコールする代わりに, このレシピでは辞書アクションを使って例えば下のように記述します.<br><br>\n<img src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/t/thetheorier/20201107/20201107151843.png\"><br>\n辞書の値は必ず「配列」にし, 定数の場合は項目数が0のままに, 数式の場合は配列の中に数字を入れます.<br>\n追加する数字の並びはplistで定義した並びと同じにする必要があります.\n<br><br><br>\n<img src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/t/thetheorier/20201107/20201107152101.png\">\nデフォルトで正しく数式を呼び出した場合は画像のようになります(画像は上記画像にある辞書の内容を引数として判別式b^2-4acの定義式を呼び出した例).<br><br>\n当然, 引数となる数たちはマジック変数を用いることも可能です.<br><br><br>\n<img src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/t/thetheorier/20201107/20201107153733.png\">\nあるいは画像のように引数を「入力を要求」のたびに「変数に追加」で格納していき…<br><br><br>\n<img src=\"https://cdn-ak.f.st-hatena.com/images/fotolife/t/thetheorier/20201107/20201107153925.png\">\nこの変数を引数として「辞書」アクションの値にしても同じように実行されます.<br><br>\n実際に使う場合はこちらの使い方が現実的でしょう.\n<br><br>\n</p><div><a href=\"http://blog.thetheorier.com/entry/shortcuts-math-library\"><span><img src=\"https://images.weserv.nl/?w=100&amp;url=ssl:cdn-ak.f.st-hatena.com/images/fotolife/t/thetheorier/20201107/20201107145102.png\"></span><br><span>【iPhoneショートカット】定数や数式ライブラリとして振る舞うレシピMathLibrarycuts - もう一人のY君</span><br><span>インクルードファイルと言うべきかヘッダーファイルと言うべきか. 今回も説明が長いです, 独自ルールもあるしこのレシピ単体で動く代物じゃないので尚更. …</span><br><span>&nbsp;</span></a></div><p></p>\n\t\t\t\t","releasenotes":"<p><strong>0.1 - Nov. 8, 2020, 1:24 a.m.</strong></p>"}