{"id":"12143","name":"Whatâ€™s on NPR?","tagline":"Retrieve live NPR program information with Siri Shortcuts.","icon":"ios15 c4292093695 g61480","latest":"33455","description":"\n\t\t\t\t\t<p><img alt=\"What's on NPR? Banner\" src=\"https://i.snap.as/SsekiEOI.png\"></p>\n<p>For more information, please see <a href=\"https://bilge.world/npr-siri-shortcuts\"><strong>my blog post about this shortcut</strong></a>.</p>\n<h2>Creating a Shortcut for <em>Your</em> NPR Station</h2>\n<p>All I really needed to customize Jack Wellborn's original shortcut was my NPR station's \"UCSID,\"which, for reference, is <code>5387648fe1c8335046a1d4b4</code>. Upon installation of my <strong>What's on NPR?</strong> shortcut, you'll be prompted to specify this. Unfortunately, retrieving it via NPR's API requires special authorization, for some reason, but - since we're retrieving data from an NPR station's playback widget already configured to use the API - it's actually as easy as opening your browser's \"Dev Tools\" or showing on your given station's homepage. If you're unfamiliar, <a href=\"https://balsamiq.com/support/faqs/browserconsole/\">here's a handy guide</a> to doing so on some popular desktop web browsers.</p>\n<p>&lt;center&gt;<a href=\"https://apps.apple.com/us/app/web-inspector/id1584825745\"><img alt=\"Web Inspector\" src=\"https://i.snap.as/6dahYnnY.png\"></a>&lt;/center&gt;</p>\n<p>Honestly, though, if you're already on your iOS/iPadOS device and you're willing to install a single, free Safari Extension, I believe you'll find <a href=\"https://apps.apple.com/us/app/web-inspector/id1584825745\">Web Inspector</a> to be the single, simplest method of retrieving your station's UCSID.</p>\n<p><img alt=\"Finding UCSID-Web Inspector\" src=\"https://i.snap.as/r1VgmbNv.png\"></p>\n<h3>Finding your station's UCSID with Web Inspector</h3>\n<ol>\n<li>Navigate to your station's homepage (ex. <code>kbia.org</code>.)</li>\n<li>Start playback of the live stream you'd like to query (may or may not be necessary, depending.)</li>\n<li>Open Web Inspector via the <a href=\"https://i.snap.as/2632HFBC.png\">Safari Extensions Menu</a>.</li>\n<li>In the <code>DOM</code> tab, use the search icon to filter for <code>ucsid</code>.</li>\n<li>Your station's UCSID is the value for the <code>data-stream-ucsid</code> field.</li>\n</ol>\n<p>Depending on how modern your station's website is (I think - I'm supposing, here,) you may or may not find this field. For reference, <a href=\"https://tilde.town/~extratone/shortcuts/kbia/example.txt\">here is the HTML source of KBIA's webpage</a> from which I drew in its entirety. If you're having trouble, please feel free to <a href=\"https://davidblue.wtf/db.vcf\">contact me</a> however you wish, ideally with your preferred station's identifier/web url.</p>\n<p>&lt;center&gt;<a href=\"https://apps.apple.com/us/app/broadcasts/id1469995354\"><img alt=\"Broadcasts\" src=\"https://i.snap.as/e68mJ9cQ.png\"></a>&lt;/center&gt;</p>\n<h3>\"Integration\" with the Broadcasts app</h3>\n<p><a href=\"https://apps.apple.com/us/app/broadcasts/id1469995354\"><strong>Broadcasts</strong></a> is a very popular and highly-praised universal Apple application for internet radio streaming. By default, my What's on NPR? shortcut includes an action to begin streaming a station in Broadcasts, but it requires further configuration.</p>\n<p><img alt=\"Broadcasts App Integration\" src=\"https://i.snap.as/eTkiNc6O.png\"></p>\n<p>In all likelihood, a search of the <a href=\"https://i.snap.as/OvItUZSE.png\">Broadcasts Directory</a> for your station's four-letter identifier should yield results. Once you've added your station to your library in Broadcasts, hold its icon (or <code>^ Tap</code>) to present the context menu (shown in the screenshots embedded above) and select <code>Edit</code>. The exact value for the <code>Name</code> field in configuration menu that results must be supplied as the answer to the second configuration step of my What's on NPR? shortcut. If you do not wish to use Broadcasts, you need only delete or replace its single action in the shortcut's default configuration.</p>\n<p>If you've followed along this far, you now have both values you're prompted for at installation of said shortcut, by default: your station's <code>ucsid</code> and its name in the Broadcasts app. You need only continue if you'd prefer to add options for <a href=\"https://apps.apple.com/us/app/apple-music/id1108187390\">Apple Music</a> and/or <a href=\"https://apps.apple.com/us/app/vlc-media-player/id650377962\">VLC</a>.</p>\n<p><img alt=\"Finding an NPR Station's Apple Music URL\" src=\"https://i.snap.as/jeNMtNgs.png\"></p>\n<h3>\"Integration\" with Apple Music</h3>\n<p>If you'd like to have a menu option to begin streaming your NPR station in Apple Music, begin by searching within the app for your station's identifier (as shown in the screenshot embedded above.) Use the triple-dot menu's <code>Share Station</code> option to copy its Apple Music URL. (WBEZ's, for example, is <code>https://music.apple.com/us/station/npr-news-wbez-chicago/ra.872998937</code>.) Replace or append to the Broadcasts option with a menu option pointing to an <a href=\"https://www.matthewcassinelli.com/actions/open-urls/\">Open URLs</a> action containing the resulting URL. (Refer to <a href=\"https://www.icloud.com/shortcuts/04ec61d2f057497bba899eb434b3da07\">my What's on KBIA? shortcut</a> to see this implemented.)</p>\n<p>&lt;center&gt;<a href=\"https://apps.apple.com/us/app/vlc-media-player/id650377962\"><img alt=\"VLC\" src=\"https://i.snap.as/RZYRoIw8.png\"></a>&lt;/center&gt;</p>\n<h3>\"Integration\" with VLC media player</h3>\n<p>The <a href=\"https://apps.apple.com/us/app/vlc-media-player/id650377962\"><strong>VLC media player</strong></a> iOS app does not yet have its own Siri Shortcuts actions, but it <em>does</em> have a handy URL scheme which allows one to stream or download the contents of any raw media URL. Using Web Inspector as described above, I was able to find the raw stream URL for KBIA (<code>https://playerservices.streamtheworld.com/api/livestream-redirect/KBIAFM.mp3</code>) quite quickly in the <code>Resources</code> tab whilst streaming live.</p>\n<p><img alt=\"Finding Raw Stream URL-Web Inspector\" src=\"https://i.snap.as/R5o3kda5.png\"></p>\n<p>To add an option to my shortcut to open the stream in vlc, I would add the following value in an Open URLs action: </p>\n<pre><code>vlc-x-callback://x-callback-url/stream?url=https://playerservices.streamtheworld.com/api/livestream-redirect/KBIAFM.mp3\n</code></pre>\n\n<hr>\n<h2>Contact</h2>\n<ul>\n<li><a href=\"https://davidblue.wtf/db.vcf\">Contact Card</a></li>\n<li><a href=\"https://t.me/extratone\">Telegram</a></li>\n<li><a href=\"mailto:davidblue@extratone.com\">Email</a> </li>\n<li><a href=\"https://twitter.com/NeoYokel\">Twitter</a></li>\n<li><a href=\"https://mastodon.social/@DavidBlue\">Mastodon</a></li>\n<li><a href=\"https://discord.gg/0b9KQUKP858b0iZF\">Discord</a></li>\n<li><a href=\"https://raindrop.io/davidblue/social-directory-21059174\"><em>Everywhere</em></a>...</li>\n</ul>\n\t\t\t\t","releasenotes":"<p><strong>1.0 - June 6, 2022, 12:08 a.m.</strong></p>"}