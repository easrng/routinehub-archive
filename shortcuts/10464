{"id":"10464","name":"Convert Image to Grayscale [JS1]","tagline":"A JavaScript one-liner to convert an image to grayscale","icon":"ios14 c255 g59784","latest":"30537","description":"\n\t\t\t\t\t<p><img alt=\"iOS 15: Works (iOS 15.2 beta 1)\" src=\"https://atnbueno.com/ios15_ok.png\">\n<strong>iOS 15:</strong> Works (iOS 15.2 beta 1)</p>\n<p>A single line of JavaScript to apply a \"black and white\" filter to images. The result can be used <em>as is</em> or combined with the original image to get a partially desaturated version. As the example shows, the conversion supports images with alpha channel (transparency):</p>\n<p><img alt=\"Example of grayscale conversion\" src=\"https://atnbueno.com/JS1/grayscale.png\"></p>\n<p>The shortcut converts silently any images received as input, giving them the same name/s.</p>\n<p>When run without input, the shortcut works as a demo, allowing the user to select one or more files and showing the result of the conversion.</p>\n<ul>\n<li>No error checking</li>\n<li><a href=\"https://developer.mozilla.org/docs/Web/API/CanvasRenderingContext2D/globalCompositeOperation\"><code>globalCompositeOperation</code> documentation at MDN</a></li>\n</ul>\n<h3>Don't download the shortcut</h3>\n<p>If you just want the code, there's no need to download the shortcut. Copy this and paste it in a \"URL\" action:</p>\n<pre><code>data:text/html,&lt;script&gt;with(document){let i=createElement(\"img\");i.src=\"data:image/png;base64,REPLACETHISWITHBASE64IMAGE\",i.onload=()=&gt;{with(createElement(\"canvas\")){height=i.height,width=i.width;with(getContext(\"2d\")){drawImage(i,0,0),globalCompositeOperation=\"saturation\",fillRect(0,0,width,height),globalCompositeOperation=\"destination-in\",drawImage(i,0,0)}write(toDataURL(\"image/png\").slice(22))}}}&lt;/script&gt;\n</code></pre>\n\n<p>Replace the <code>REPLACETHISWITHBASE64IMAGE</code> fragment with the base64-encoded image, add a \"Get File of Type\" with type <code>com.apple.webarchive</code> below, and decode the base64 output to get the decolored image.</p>\n<p>I use \"Get File of Type\" instead of \"Get Contents of Webpage\" to avoid that the user is misleading told that the shortcut uses Safari.</p>\n\t\t\t\t","releasenotes":"<p><strong>1.0.0 - Nov. 8, 2021, 9:08 p.m.</strong></p>"}